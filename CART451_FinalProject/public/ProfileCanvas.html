<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="stylesheet.css" />
<!-- Load the Paper.js library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="js/paper-full.js"></script>
<script type="text/javascript" src="js/client.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
<style> @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap'); </style>
<script type="text/javascript">
    paper.install(window);
    let colour = 'black';
    let ogcolour;
    let brushSize = 1;
    let canvas;
    var art;

    window.onload = function() {
        document.getElementById("FirstNameRand").value = document.getElementById("FirstNameAns").value;
		// Get a reference to the canvas object
		canvas = document.getElementById('myCanvas');
        paper.setup(canvas);
        let pathTool =  new Tool();
        let myPath;

        pathTool.onMouseDown = function (event){
            path = new Path();
			path.strokeColor = colour;
			path.add(event.point);
            path.strokeWidth = brushSize;
        }
        pathTool.onMouseDrag = function(event) {
			path.add(event.point);
		}
    }
    function ChangeColour(selectedColour){
        colour = selectedColour;
    }
    function ChangeSize(change){
        brushSize = brushSize += change;

        document.getElementById("brushSize").innerHTML = brushSize;
    }
    function ChangeTool(pen){
        ogcolour = colour;
        if(pen){
            colour = ogcolour;
        } else if(!pen){
            colour = "white";
        }
    }
    function SaveImg(){
        var dataURL = canvas.toDataURL();
        document.querySelector("#finishedImg").src = dataURL;
        window.location.href = "/viewProfile";
    }
    function Home(){
        window.location.href = "/home";
    }
    </script>
    <title>ProfileCanvas</title>
</head>
<body>
    <div class="main">
        <div class="topBar" style="display: flex;"><button onclick="Home()" class="home" style="height: 45px; width: 50px; margin: 1%; background-color: white; border: 2px solid #1F6D80; border-radius: 5px; color:#1F6D80;">Home</button><h3>DRAW YOURSELF:</h3></div>
        <div class="interface">
            <div class="canvasSetup">
                <span id="FirstNameAns" style="display: none;">Annie</span><span id="FirstNameRand" style="display: none;">Leffler</span>
                <div class="canvas">
                    <canvas id = "myCanvas"></canvas>
                    <div class="colours">
                        <div class="row1">
                            <button onclick="ChangeColour('red')" class="colourBtn" style="background-color: red; border-color: red;"></button>
                            <button onclick="ChangeColour('orange')" class="colourBtn" style="background-color: orange; border-color: orange;"></button>
                            <button onclick="ChangeColour('yellow')" class="colourBtn" style="background-color: yellow; border-color: yellow;"></button>
                            <button onclick="ChangeColour('green')" class="colourBtn" style="background-color: green; border-color: green;"></button>
                            <button onclick="ChangeColour('blue')" class="colourBtn" style="background-color: blue; border-color: blue;"></button>
                            <button onclick="ChangeColour('purple')" class="colourBtn" style="background-color: purple; border-color: purple;"></button>
                            <button onclick="ChangeColour('pink')" class="colourBtn" style="background-color: pink; border-color: pink;"></button>
                            <button onclick="ChangeColour('white')" class="colourBtn" style="background-color: white; border-color: white;"></button>
                            <button onclick="ChangeColour('grey')" class="colourBtn" style="background-color: grey; border-color: grey;"></button>
                            <button onclick="ChangeColour('black')" class="colourBtn" style="background-color: black; border-color: black;"></button>
                            <button onclick="ChangeSize(1)" class="colourBtn" style="background-color: lightblue; border-color: black;">+</button>
                            <b id="brushSize"> 1 </b>
                            <button onclick="ChangeSize(-1)" class="colourBtn" style="background-color: lightblue; border-color: black;">-</button>
                        </div>
                        <div class="row2">
                            <button onclick="ChangeColour('red')" class="colourBtn" style="background-color: red; border-color: red;"></button>
                            <button onclick="ChangeColour('orange')" class="colourBtn" style="background-color: orange; border-color: orange;"></button>
                            <button onclick="ChangeColour('yellow')" class="colourBtn" style="background-color: yellow; border-color: yellow;"></button>
                            <button onclick="ChangeColour('green')" class="colourBtn" style="background-color: green; border-color: green;"></button>
                            <button onclick="ChangeColour('blue')" class="colourBtn" style="background-color: blue; border-color: blue;"></button>
                            <button onclick="ChangeColour('purple')" class="colourBtn" style="background-color: purple; border-color: purple;"></button>
                            <button onclick="ChangeColour('pink')" class="colourBtn" style="background-color: pink; border-color: pink;"></button>
                            <button onclick="ChangeColour('white')" class="colourBtn" style="background-color: white; border-color: white;"></button>
                            <button onclick="ChangeColour('grey')" class="colourBtn" style="background-color: grey; border-color: grey;"></button>
                            <button onclick="ChangeColour('black')" class="colourBtn" style="background-color: black; border-color: black;"></button>
                            <button onclick="ChangeTool(true)" class="toolBtn" style="background-color: lightblue; border-color: black;">Pencil</button>
                            <button onclick="ChangeTool(false)" class="toolBtn" style="background-color: lightblue; border-color: black;">Eraser</button>
                            <button onclick="SaveImg()" class="toolBtn" id="submitBtn" style="background-color: lightblue; border-color: black;">Submit</button>
                        </div>
                    </div>
                </div>
            </div>  
        </div>
    </div>
</body>
</html>